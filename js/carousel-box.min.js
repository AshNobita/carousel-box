function Card(e,t,n,r,i,s,o,u){this.width=e,this.height=t,this.left=n,this.imgUrl=r,this.zIndex=i,this.ref=s,this.posterInfo=o,this.linkTarget=u}var CarouselBox=function(e,t,n){defaultImgSizes={level0:{width:0,height:0},level1:{width:500,height:120},level2:{width:500,height:244},level3:{width:610,height:290}},this.imgCnt=n.length,this.containerWidth=t!=null?t.containerWidth?t.containerWidth:1160:1160,this.containerHeight=t!=null?t.containerHeight?t.containerHeight:330:330,this.animateDelay=t!=null?t.animateDelay?t.animateDelay:500:500,this.slideDelay=t!=null?t.slideDelay?t.slideDelay:5e3:5e3,this.imgSizes=t!=null?t.imgSizes?t.imgSizes:defaultImgSizes:defaultImgSizes,this.useNavControl=t!=null?t.useNavControl?t.useNavControl:!1:!1,this.useShadeLayer=t!=null?t.useShadeLayer==0?t.useShadeLayer:!0:!0,this.posters=n,this.imgLeftPosition={imgLeft1:-this.imgSizes.level1.width,imgLeft2:this.containerWidth>this.imgSizes.level3.width?0:-this.imgSizes.level2.width,imgCenter:this.containerWidth>this.imgSizes.level3.width?(this.containerWidth-this.imgSizes.level3.width)/2:0,imgRight1:this.containerWidth>this.imgSizes.level3.width?this.containerWidth-this.imgSizes.level2.width:this.containerWidth,imgRight2:this.containerWidth},this._init(e)};CarouselBox.prototype._init=function(e){var t=this.createCarouselBox(this.posters.imgUrls.length);$(e).append(t),this.registerEvent(t),this.autoSlide(t,this.slideDelay)},CarouselBox.prototype.createCarouselBox=function(e){var t=$("<div class='carousel-box'></div>").css({width:this.containerWidth+"px",height:this.containerHeight+"px",margin:"0 auto",position:"relative",overflow:"hidden"}),n=this.initCarouselBoxCards(e);for(var r=0;r<e;r++){var i=$("<div></div>");i.attr({ref:n[r].ref}),i.css({zIndex:n[r].zIndex,width:n[r].width+"px",height:n[r].height+"px",left:n[r].left+"px",top:0,bottom:0,margin:"auto",position:"absolute",overflow:"hidden",boxShadow:"0 0 5px #888888"});var s=$('<a target="_blank"></a>').attr({href:n[r].linkTarget}).append($("<img/>").attr({src:n[r].imgUrl}).css({width:"100%",height:"100%"}));if(n[r].posterInfo!=undefined&&n[r].posterInfo!=""){var o=null;n[r].linkTarget!=undefined&&n[r].linkTarget!=""?o=$("<div class='poster-info'><a target=\"_blank\" href='"+n[r].linkTarget+"'>"+n[r].posterInfo+"</a></div>"):o=$("<div class='poster-info'><a target=\"_blank\"  onclick=\"return false\" href='#'>"+n[r].posterInfo+"</a></div>"),n[r].zIndex==3&&o.css({display:"block"}),i.append(o)}if(this.useShadeLayer){var u=$("<div class='shade-layer'></div>");n[r].zIndex==3&&u.css({display:"none"}),i.append(u)}n[r].zIndex==3&&i.addClass("curindex"),i.append(s).addClass("poster-card"),t.append(i)}if(this.useNavControl){var a=$("<div class='banner-controls'><div class='left-nav'><i class='fas fa-angle-left fa-3x'></i></div><div class='right-nav'><i class='fas fa-angle-right fa-3x'></i></div></div>");t.append(a)}var f=$("<div></div>").css({width:"100%",height:"10px",position:"absolute",bottom:"0",textAlign:"center"});for(var r=0;r<e;r++){var l=$("<div class='nav-button-Off'></div>").attr({ref:r});n[r].zIndex==3&&l.addClass("nav-button-on"),f.append(l)}return t.append(f),t},CarouselBox.prototype.initCarouselBoxCards=function(e){var t=[];for(var n=0;n<e;n++){var r=this.posters?this.posters.posterInfo?this.posters.posterInfo[n]:null:null,i=this.posters?this.posters.linkTarget?this.posters.linkTarget[n]:null:null;n==0?t.push(new Card(this.imgSizes.level3.width,this.imgSizes.level3.height,this.imgLeftPosition.imgCenter,this.posters.imgUrls[n],3,n,r,i)):n==1?t.push(new Card(this.imgSizes.level2.width,this.imgSizes.level2.height,this.imgLeftPosition.imgRight1,this.posters.imgUrls[n],2,n,r,i)):n==e-1?t.push(new Card(this.imgSizes.level2.width,this.imgSizes.level2.height,this.imgLeftPosition.imgLeft2,this.posters.imgUrls[n],2,n,r,i)):n==2?t.push(new Card(this.imgSizes.level1.width,this.imgSizes.level1.height,this.imgLeftPosition.imgRight2,this.posters.imgUrls[n],1,n,r,i)):n==e-2?t.push(new Card(this.imgSizes.level1.width,this.imgSizes.level1.height,this.imgLeftPosition.imgLeft1,this.posters.imgUrls[n],1,n,r,i)):t.push(new Card(this.imgSizes.level0.width,this.imgSizes.level0.height,this.imgLeftPosition.imgCenter,this.posters.imgUrls[n],0,n,r,i))}return t},CarouselBox.prototype.nextPoster=function(e,t,n,r){if(t==undefined){var i=$(".curindex",e).attr("ref");t=(parseInt(i)+1)%n}$(".curindex",e).removeClass("curindex");for(var s=0;s<n;s++)if(s==t){$(".poster-card:nth-child("+(s+1)+")",e).animate({zIndex:3},100).animate({left:this.imgLeftPosition.imgCenter,width:this.imgSizes.level3.width,height:this.imgSizes.level3.height,opacity:1},r).addClass("curindex");var o=$(".poster-card:nth-child("+(s+1)+") .poster-info",e);o!=undefined&&o.fadeIn(r),$(".poster-card:nth-child("+(s+1)+") .shade-layer",e).fadeOut(r),$(".nav-button-Off:nth-child("+(s+1)+")",e).addClass("nav-button-on")}else if(s==(t+1)%n){$(".poster-card:nth-child("+(s+1)+")",e).animate({zIndex:2},100).animate({left:this.imgLeftPosition.imgRight1,width:this.imgSizes.level2.width,height:this.imgSizes.level2.height,opacity:1},r);var o=$(".poster-card:nth-child("+(s+1)+") .poster-info",e);o!=undefined&&o.fadeOut(r),$(".poster-card:nth-child("+(s+1)+") .shade-layer",e).fadeIn(r),$(".nav-button-Off:nth-child("+(s+1)+")",e).removeClass("nav-button-on")}else if(s==(t+2)%n){$(".poster-card:nth-child("+(s+1)+")",e).animate({zIndex:1},100).animate({left:this.imgLeftPosition.imgRight2,width:this.imgSizes.level1.width,height:this.imgSizes.level1.height,opacity:0},r);var o=$(".poster-card:nth-child("+(s+1)+") .poster-info",e);o!=undefined&&o.fadeOut(r),$(".poster-card:nth-child("+(s+1)+") .shade-layer",e).fadeIn(r),$(".nav-button-Off:nth-child("+(s+1)+")",e).removeClass("nav-button-on")}else if(t-1>=0&&s==t-1||t==0&&s==n-1){$(".poster-card:nth-child("+(s+1)+")",e).animate({zIndex:2},100).animate({left:this.imgLeftPosition.imgLeft2,width:this.imgSizes.level2.width,height:this.imgSizes.level2.height,opacity:1},r);var o=$(".poster-card:nth-child("+(s+1)+") .poster-info",e);o!=undefined&&o.fadeOut(r),$(".poster-card:nth-child("+(s+1)+") .shade-layer",e).fadeIn(r),$(".nav-button-Off:nth-child("+(s+1)+")",e).removeClass("nav-button-on")}else if(t-2>=0&&s==t-2||t==1&&s==n-1||t==0&&s==n-2){$(".poster-card:nth-child("+(s+1)+")",e).animate({zIndex:1},100).animate({left:this.imgLeftPosition.imgLeft1,width:this.imgSizes.level1.width,height:this.imgSizes.level1.height,opacity:0},r);var o=$(".poster-card:nth-child("+(s+1)+") .poster-info",e);o!=undefined&&o.fadeOut(r),$(".poster-card:nth-child("+(s+1)+") .shade-layer",e).fadeIn(r),$(".nav-button-Off:nth-child("+(s+1)+")",e).removeClass("nav-button-on")}else{$(".poster-card:nth-child("+(s+1)+")",e).animate({zindex:0},100).animate({left:this.imgLeftPosition.imgCenter,width:this.imgSizes.level0.width,height:this.imgSizes.level0.height,opacity:0},r);var o=$(".poster-card:nth-child("+(s+1)+") .poster-info",e);o!=undefined&&o.fadeOut(r),$(".poster-card:nth-child("+(s+1)+") .shade-layer",e).fadeIn(r),$(".nav-button-Off:nth-child("+(s+1)+")",e).removeClass("nav-button-on")}},CarouselBox.prototype.registerEvent=function(e){var t=this;this.useNavControl&&($(".banner-controls .left-nav",e).unbind("click").bind("click",function(){if(!$(".poster-card",e).is(":animated")){var n,r=parseInt($(".curindex",e).attr("ref"));r==0?n=t.posters.imgUrls.length-1:n=parseInt($(".curindex",e).attr("ref"))-1,t.nextPoster(e,n,t.posters.imgUrls.length,t.animateDelay)}}),$(".banner-controls .right-nav",e).unbind("click").bind("click",function(){if(!$(".poster-card",e).is(":animated")){var n=(parseInt($(".curindex",e).attr("ref"))+1)%t.posters.imgUrls.length;t.nextPoster(e,n,t.posters.imgUrls.length,t.animateDelay)}}));for(var n=0;n<t.posters.imgUrls.length;n++)$(".nav-button-Off:nth-child("+(n+1)+")",e).unbind("click").bind("click",function(){if(!$(".poster-card",e).is(":animated")){var n=parseInt($(this).attr("ref"));t.nextPoster(e,n,t.posters.imgUrls.length,t.animateDelay)}})},CarouselBox.prototype.autoSlide=function(e,t){var n=this,r=e;setInterval(function(){n.nextPoster(r,undefined,n.posters.imgUrls.length,n.animateDelay)},t)};